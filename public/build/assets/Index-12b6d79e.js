import{_ as g,f as h,o as l,c as d,b as t,e as a,F as u,r as p,t as i,d as m,w as b,v as f}from"./app-b6edc1a6.js";const P={name:"Index",data(){return{posts:null,form:{title:"",content:""},editedPostId:null}},mounted(){this.getPosts()},methods:{getPosts(){h.get("/api/auth/posts").then(o=>this.posts=o.data.data).then(()=>this.$router.push({name:"posts.index"})).catch(o=>console.log(o))},editPost(o,s,_){this.editedPostId=o,this.form.title=s,this.form.content=_},updatePost(o){h.patch(`/api/auth/posts/${o}`,this.form).then(()=>this.resetEditedPost()).then(()=>this.getPosts()).catch(s=>console.log(s)),this.editedPostId=null},cancelUpdatePost(){this.editedPostId=null,this.resetEditedPost()},resetEditedPost(){for(let o in this.form)this.form[o]=""},destroyPost(o){h.delete(`/api/auth/posts/${o}`).then(()=>this.getPosts()).catch(s=>console.log(s))}}},y={class:"p-5"},v={class:"d-flex justify-content-between"},x=t("h3",null,"List of posts",-1),C={class:"table"},k=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"Title"),t("th",{scope:"col"},"Content"),t("th",{scope:"col"},"Created at"),t("th",{scope:"col"},"Tags"),t("th",{scope:"col"})])],-1),w={key:0,class:"align-text-bottom"},I={scope:"row"},U={class:"d-inline"},B={class:"badge rounded-pill text-bg-secondary me-1"},D={class:"btn-group",role:"group"},E=["onClick"],L=["onClick"],V={key:1,class:"align-text-bottom"},S={scope:"row"},T={class:"d-inline"},F={class:"badge rounded-pill text-bg-secondary me-1"},G={class:"btn-group",role:"group"},M=["onClick"];function N(o,s,_,j,r,c){return l(),d("div",y,[t("div",v,[x,t("button",{onClick:s[0]||(s[0]=a(e=>o.$router.push({name:"posts.create"}),["prevent"])),type:"button",class:"btn btn-outline-secondary"},"Create new post")]),t("table",C,[k,t("tbody",null,[(l(!0),d(u,null,p(r.posts,e=>(l(),d(u,null,[r.editedPostId!==e.id?(l(),d("tr",w,[t("th",I,i(e.id),1),t("td",null,i(e.title),1),t("td",null,i(e.content),1),t("td",null,i(new Date(e.date).toLocaleString("en-GB",{hour12:!1})),1),t("td",null,[(l(!0),d(u,null,p(e.tags,n=>(l(),d("div",U,[t("span",B,i(n.name),1)]))),256))]),t("td",null,[t("div",D,[t("button",{onClick:a(n=>c.editPost(e.id,e.title,e.content),["prevent"]),type:"button",class:"btn btn-primary"},"Edit",8,E),t("button",{onClick:a(n=>c.destroyPost(e.id),["prevent"]),type:"button",class:"btn btn-danger"},"Delete",8,L)])])])):m("",!0),r.editedPostId===e.id?(l(),d("tr",V,[t("th",S,i(e.id),1),t("td",null,[b(t("input",{"onUpdate:modelValue":s[1]||(s[1]=n=>r.form.title=n),type:"text",class:"form-control",placeholder:"Post title"},null,512),[[f,r.form.title]])]),t("td",null,[b(t("textarea",{"onUpdate:modelValue":s[2]||(s[2]=n=>r.form.content=n),class:"form-control",rows:"3"},null,512),[[f,r.form.content]])]),t("td",null,i(new Date(e.date).toLocaleString("en-GB",{hour12:!1})),1),t("td",null,[(l(!0),d(u,null,p(e.tags,n=>(l(),d("div",T,[t("span",F,i(n.name),1)]))),256))]),t("td",null,[t("div",G,[t("button",{onClick:a(n=>c.updatePost(e.id),["prevent"]),type:"button",class:"btn btn-primary"},"Update",8,M),t("button",{onClick:s[3]||(s[3]=a((...n)=>c.cancelUpdatePost&&c.cancelUpdatePost(...n),["prevent"])),type:"button",class:"btn btn-secondary"},"Cancel")])])])):m("",!0)],64))),256))])])])}const z=g(P,[["render",N]]);export{z as default};
