import{_ as b,f as m,o as i,c as d,b as t,F as U,r as g,t as r,e as c,d as _,w as u,v as h}from"./app-b6edc1a6.js";const y={name:"Index",data(){return{users:null,editedUserId:null,form:{firstname:"",lastname:"",email:""}}},mounted(){this.getUsers()},methods:{getUsers(){m.get("/api/auth/users").then(n=>this.users=n.data.data).catch(n=>console.log(n))},editUser(n,s,p,f){this.editedUserId=n,this.form.firstname=s,this.form.lastname=p,this.form.email=f},updateUser(n){m.patch(`/api/auth/users/${n}`,this.form).then(()=>this.resetEditedUser()).then(()=>this.getUsers()).catch(s=>console.log(s)),this.editedUserId=null},cancelUpdateUser(){this.editedUserId=null,this.resetEditedUser()},resetEditedUser(){for(let n in this.form)this.form[n]=""},destroyUser(n){m.delete(`/api/auth/users/${n}`).then(()=>this.getUsers()).catch(s=>console.log(s))}}},v={class:"p-5"},k=t("h3",null,"List of users",-1),x={class:"table"},C=t("thead",null,[t("tr",null,[t("th",{scope:"col"},"#"),t("th",{scope:"col"},"First name"),t("th",{scope:"col"},"Last name"),t("th",{scope:"col"},"Email"),t("th",{scope:"col"},"Registration date"),t("th",{scope:"col"})])],-1),I={key:0,class:"align-text-bottom"},w={scope:"row"},E={class:"btn-group",role:"group"},L=["onClick"],B=["onClick"],D={key:1,class:"align-text-bottom"},V={scope:"row"},F={class:"btn-group",role:"group"},S=["onClick"];function G(n,s,p,f,l,a){return i(),d("div",v,[k,t("table",x,[C,t("tbody",null,[(i(!0),d(U,null,g(l.users,e=>(i(),d(U,null,[e.id!==l.editedUserId?(i(),d("tr",I,[t("th",w,r(e.id),1),t("td",null,r(e.firstname),1),t("td",null,r(e.lastname),1),t("td",null,r(e.email),1),t("td",null,r(new Date(e.created_at).toLocaleString("en-GB",{hour12:!1})),1),t("td",null,[t("div",E,[t("button",{onClick:c(o=>a.editUser(e.id,e.firstname,e.lastname,e.email),["prevent"]),type:"button",class:"btn btn-primary"},"Edit",8,L),t("button",{onClick:c(o=>a.destroyUser(e.id),["prevent"]),type:"button",class:"btn btn-danger"},"Delete",8,B)])])])):_("",!0),e.id===l.editedUserId?(i(),d("tr",D,[t("th",V,r(e.id),1),t("td",null,[u(t("input",{"onUpdate:modelValue":s[0]||(s[0]=o=>l.form.firstname=o),type:"text",class:"form-control",placeholder:"First name"},null,512),[[h,l.form.firstname]])]),t("td",null,[u(t("input",{"onUpdate:modelValue":s[1]||(s[1]=o=>l.form.lastname=o),type:"text",class:"form-control",placeholder:"Last name"},null,512),[[h,l.form.lastname]])]),t("td",null,[u(t("input",{"onUpdate:modelValue":s[2]||(s[2]=o=>l.form.email=o),type:"email",class:"form-control",placeholder:"Email"},null,512),[[h,l.form.email]])]),t("td",null,r(new Date(e.created_at).toLocaleString("en-GB",{hour12:!1})),1),t("td",null,[t("div",F,[t("button",{onClick:c(o=>a.updateUser(e.id),["prevent"]),type:"button",class:"btn btn-primary"},"Update",8,S),t("button",{onClick:s[3]||(s[3]=c((...o)=>a.cancelUpdateUser&&a.cancelUpdateUser(...o),["prevent"])),type:"button",class:"btn btn-secondary"},"Cancel")])])])):_("",!0)],64))),256))])])])}const N=b(y,[["render",G]]);export{N as default};
